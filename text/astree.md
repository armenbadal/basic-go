# Վերլուծության ծառ

Աբստրակտ քերականական ծառը լեզվի քերականության ծրագրային ներկայացումն է։ Ես ստրուկտուրաներ եմ սահմանել քերականության բոլոր ոչ տերմինալային սիմվոլների համար։

Ծառի հանգույցներում ենթածառերին հղվելու համար սահմանված է `Node` ինտերֆեյսը.

```Go
type Node interface{}
```

Ամենապարզ հանգույցները նախատեսված են բուլյան արժեքների, թվերի, տեքստերի լիտերալների և փոփոխականների ներկայացման համար։ Այս տիպի հանգույցները վերլուծության ծառում հանդիպում են միայն որպես _տերևներ_։

```Go
// Boolean Բուլյան լիտերալ
type Boolean struct {
	Value bool // տրամաբանական հաստատուն
}

// Number Թվային լիտերալ
type Number struct {
	Value float64 // թվային հաստատուն
}

// Text Տեքստային լիտերալ
type Text struct {
	Value string // տեքստային հաստատուն
}

// Variable Փոփոխական
type Variable struct {
	Name string // փոփոխականի անունը
}
```

Զանգվածի լիտերալի ներկայացման համար `Array` հանգույցն է, որի `Elements` դաշտը `Node`-երի ցուցակ է.

```Go
// Array Զանգվածի լիտերալ
type Array struct {
	Elements []Node  // զանգվածի տարրերը
}
```

Լեզվում ներդրված գործողությունները երկու տեսակի են՝ միտեղանի (ունար, unary) և երկտեղանի (բինար, binary)։ Դրանց համար սահմանված են համապատասխանաբար `Unary` և `Binary` հանգույցները.

```Go
// Unary Ունար գործողություն
type Unary struct {
	Operation string  // գործողությունը
	Right     Node    // արգումենտը
}

// Binary Բինար գործողություն
type Binary struct {
	Operation   string // գործողությունը
	Left, Right Node   // ձախ ու աջ արգումենտները
}

```

Արտահայտություններում ֆունկցիա-ենթածրագրերի կիրառությունը ներկայացնելու համար սահմանված է `Apply` հանգույցը, որի `Callee` դաշտը կիրառվելի ենթածրագրի անունն է, իսկ `Arguments` զանգվածը՝ կիրառման արգումենտների ցուցակը։ 

```Go
// Apply Ֆունկցիայի կիրառում
type Apply struct {
	Callee    string  // ենթածրագրի անուն
	Arguments []Node  // արգումենտների ցուցակ
}
```

Բալ լեզվի ութ հրամանների համար էլ առանձին-առանձին սահմանված են վերլուծության ծառի հանգույցներ։ Զանգվածների սահմանման `DIM` հրամանի համար սահմանված հանգույցի տիպը պարունակում է զանգվածի անունն ու տարրերի քանակը։

```Go
// Dim զանգվածի սահմանում
type Dim struct {
	Name string  // անուն
	Size Node    // տարրերի քանակ
}
```

Վերագրման `LET` հրամանի `Place` դաշտով որոշվում է այն տեղը, որին պիտի վերագրել `Value` դաշտից հաշվարկած արժեքը։

```Go
// Let Վերագրում
type Let struct {
	Place Node  // վերագրման տեղը
	Value Node  // վերագրվող արժեքը
}
```

Ներմուծման հրամանի հանգույցի տիպում միայն այն տեղի հղումն է, որտեղ պետք է պահել ներմուծված արժեքը։

```Go
// Input Ներմուծում
type Input struct {
	Place Node  // արժեքը պահելու տեղը
}
```

Արտածման հրամանի հանգույցում էլ արտածվող արժեքը ներկայացնող արտահայտության ենթածառն է։

```Go
// Print Արտածում
type Print struct {
	Value Node  // արտածվելիք արժեք
}
```

Պայմանի կամ ճյուղավորման հրամանը ներկայացնող հանգույցի տիպն ուն երեք դաշտ՝ պայմանի, դրական ու բացասական ընտրությունների ենթածառերի համար։

```Go
// If Ճյուղավորում
type If struct {
	Condition   Node  // պայման
	Decision    Node  // դրական ընտրություն
	Alternative Node  // բացասական ընտրություն
}
```

Նախապայմանով ցիկլի նկարագրման `While` տիպը հղումներ է պարունակում ցիկլի կատարման պայմանի ու մարմնի ենթածառերին։

```Go
// While Նախապայմանով ցիկլ
type While struct {
	Condition Node  // կատարման պայման
	Body      Node  // մարմին
}
```

Իսկ պարամետրով ցիկլը ներկայացնող հանգույցի `For` տիպը

```Go
// For Հաշվիչով ցիկլ
type For struct {
	Parameter Node  // ցիկլի հաշվիչը
	Begin     Node  // հաշվիչի սկզբնական արժեք
	End       Node  // հաշվիչի վերջնական արժեք
	Step      Node  // հաշվիչի քայլը
	Body      Node  // ցիկլի մարմինը
}
```

Ենթածրագրի կանչի `CALL` հրամանի համար օգտագործում եմ ենթածրագիր-ֆունկցիայի կիրառման հանգույցի `Apply` տիպը։

```Go
// Call Ենթածրագիր կանչ
type Call = Apply
```

Եվ վերջապես, հրամանների հաջորդականության հանգույցի տիպը, որը պարզապես պարունակում է հրամանների ենթածառերի ցուցակը։

```Go
// Sequence Հրամանների հաջորդականություն
type Sequence struct {
	Items []Node // հրամաններ
}
```

Ենթածրագիրը ներկայացնող հանգույցը, թերևս, սպասվածից էլ պարզ է. այն պարունակում է ենթածրագի անունը, պարամետրերի ցուցակը և մարմնի ենթածառը։

```Go
// Subroutine Ենթածրագիր
type Subroutine struct {
	Name       string   // ենթածրագրի անուն
	Parameters []string // պարամետրերի ցուցակ
	Body       Node     // մարմին
}
```

Ծրագիրն էլ պարունակում է ենթածրագրերի հավաքածուն՝ որպես _անուն_-_ենթածրագիր_ արտապատկերում։ 

```Go
// Program Ծրագիր
type Program struct {
	Members map[string]Node // ենթածրագրերի ցուցակ
}
```